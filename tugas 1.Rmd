---
title: "Tugas 1 visual"
author: "Habib Rafa Ardhitya, A320240013"
date: "`r Sys.Date()`"
output: 
  html_document:
    theme: flatly
    higlight: zenburn
    toc: true
    toc_float:
      collapsed: true
    df_print: paged
---

```{=html}
<style>
body{
text-align: justify}
</style>
```
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Langkah Pertama


## 1.1 Pendahuluan

Tujuan dari bab ini adalah untuk membimbing Anda dalam membuat grafik yang informatif menggunakan ggplot2 dengan cara yang cepat dan efisien. Pada bagian ini, Anda akan mempelajari konsep dasar dari fungsi `ggplot()` serta beberapa “resep” praktis yang dapat digunakan untuk membuat berbagai jenis plot yang paling sering digunakan. Fungsi `ggplot()` memungkinkan Anda membangun visualisasi yang kompleks hanya dengan beberapa baris kode, karena dibangun berdasarkan teori mendasar yang kuat, yaitu grammar of graphics. Dalam bab ini, fokus utama adalah pada penerapan langsung, sementara pembahasan teori akan dijelaskan lebih mendalam pada bab-bab berikutnya agar Anda dapat memahami seluruh kekuatan ekspresif dari grammar tersebut.

Dalam Bab ini anda akan mempelajari:

- Tentang `mpg` Dataset yang disertakan dengan ggplot2,
- Tiga komponen utama dari setiap plot: data, estetika, dan geom.
- Bagaimana menambahkan variabel tambahan ke plot dengan estetika,
- Bagaimana menampilkan variabel kategorikal tambahan dalam sebuah plot menggunakan small      multiples yang dibuat dengan faceting,
- Berbagai macam geoms yang dapat Anda gunakan untuk membuat berbagai jenis grafik,
- Bagaimana cara memodifikasi sumbu,
- Hal-hal yang dapat Anda lakukan dengan objek plot selain menampilkannya, seperti             menyimpannya ke disk,

## 1.2 Data efisiensi bahan bakar

Pada bab ini, kita akan menggunakan sebuah set data yang telah tersedia di dalam paket ggplot2, yaitu `mpg`. Dataset ini berisi informasi mengenai efisiensi bahan bakar dari berbagai model mobil populer pada tahun 1999 dan 2008, yang dikumpulkan oleh Badan Perlindungan Lingkungan Amerika Serikat (EPA) melalui situs <http://fueleconomy.gov>
. Data tersebut dapat diakses dengan cara memuat paket ggplot2 sebagai berikut:

```{r}
library(ggplot2)
mpg
#> # A tibble: 234 × 11
#>   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
#>   <chr>        <chr> <dbl> <int> <int> <chr>      <chr> <int> <int> <chr> <chr> 
#> 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
#> 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
#> 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…
#> 4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa…
#> 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa…
#> 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa…
#> # ℹ 228 more rows
```

Variabel-variabel tersebut sebagian besar dapat dipahami secara otomatis:

- `cty` dan `hwy` mencatat mil per galon (mpg) untuk mengemudi di kota dan jalan raya.
- `displ` adalah kapasitas mesin dalam liter.
- `drv` adalah sistem penggerak: roda depan (f), roda belakang (r), atau empat roda (4).
- `model` adalah model mobil. Ada 38 model, dipilih karena mereka memiliki edisi baru setiap    tahun antara 1999 dan 2008.
- `kelas` adalah variabel kategorikal yang menggambarkan “jenis” mobil: dua tempat duduk,       SUV, kompak, dll.

Dataset ini memberikan berbagai pertanyaan menarik untuk dieksplorasi. Misalnya, bagaimana keterkaitan antara kapasitas mesin dan tingkat efisiensi bahan bakar? Apakah terdapat produsen kendaraan tertentu yang lebih fokus pada efisiensi bahan bakar dibanding produsen lainnya? Selain itu, apakah efisiensi bahan bakar mengalami peningkatan dalam kurun waktu sepuluh tahun terakhir? Pada bab ini, kita akan mencoba menjawab beberapa pertanyaan tersebut sekaligus mempelajari cara membuat berbagai jenis grafik dasar menggunakan ggplot2.

### 1.2.1 Latihan

1.Daftar lima fungsi yang dapat Anda gunakan untuk mendapatkan informasi lebih lanjut tentang   dataset `mpg.`[eos]
2.Bagaimana Anda bisa mengetahui dataset lain apa saja yang disertakan dengan ggplot2?
3.Selain di AS, sebagian besar negara menggunakan konsumsi bahan bakar (bahan bakar yang       digunakan untuk jarak tertentu) daripada efisiensi bahan bakar (jarak yang ditempuh dengan   jumlah bahan bakar tertentu). Bagaimana Anda bisa mengubah `cty` dan `hwy` menjadi standar   Eropa dalam l/100km?
4.Produsen mana yang memiliki model terbanyak dalam dataset ini? Model mana yang memiliki     variasi terbanyak? Apakah jawaban Anda berubah jika Anda menghapus spesifikasi drive train   yang berulang (misalnya “pathfinder 4wd”, “a4 quattro”) dari nama model?

## 1.3 Komponen utama

Setiap plot ggplot2 memiliki tiga komponen utama:
1.data,
2.Sekumpulan pemetaan estetika antara variabel dalam data dan properti visual, 
3.danSetidaknya satu lapisan yang menjelaskan bagaimana merender setiap observasi. Lapisan     biasanya dibuat dengan fungsi geom.

Berikut adalah contoh sederhana:
```{r}
ggplot(mpg, aes(x = displ, y = hwy)) + 
  geom_point()
```

Ini menghasilkan scatterplot yang didefinisikan oleh:

1.Data: `mpg.`

2.Pemetaan estetika: ukuran mesin dipetakan ke posisi x, efisiensi bahan bakar ke posisi y.

3.Lapisan: titik-titik.

Perhatikan struktur pemanggilan fungsi berikut: data serta pemetaan estetik ditempatkan di dalam `ggplot()`, kemudian ditambahkan berbagai lapisan menggunakan operator `+`. Pola ini sangat penting untuk dipahami, karena seiring Anda mempelajari ggplot2 lebih lanjut, Anda akan mampu membangun visualisasi yang lebih kompleks dengan menambahkan berbagai jenis komponen secara bertahap.

Dalam sebagian besar plot, biasanya terdapat pemetaan variabel ke sumbu `x` dan `y`. Karena penulisan nama estetika ini secara eksplisit dapat terasa repetitif, ggplot2 mengizinkan dua argumen pertama yang tidak diberi nama di dalam fungsi `aes()` secara otomatis dianggap sebagai `x` dan `y`. Oleh sebab itu, kode berikut memiliki fungsi yang sama dengan contoh sebelumnya:

```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point()
```

Kita akan terus menggunakan gaya penulisan tersebut sepanjang buku ini, sehingga penting untuk diingat bahwa dua argumen pertama dalam fungsi `aes()` secara otomatis dipetakan sebagai `x` dan `y`. Perhatikan pula bahwa setiap perintah ditempatkan pada baris baru. Praktik ini sangat disarankan saat Anda menulis kode sendiri, karena memudahkan dalam membaca spesifikasi plot dan memahami struktur komponen secara jelas. Namun, dalam bab ini, terkadang kita akan menggunakan satu baris per plot untuk memudahkan melihat variasi antar grafik dengan cepat.

Grafik yang dihasilkan menunjukkan hubungan yang cukup kuat: semakin besar ukuran mesin kendaraan, semakin rendah efisiensi bahan bakarnya. Terdapat pula beberapa titik yang tampak sebagai pencilan menarik, yaitu mobil dengan mesin berkapasitas besar tetapi menunjukkan efisiensi bahan bakar di atas rata-rata. Menurut Anda, kira-kira jenis kendaraan apa yang termasuk dalam kategori tersebut?

### 1.3.1

1.Bagaimana Anda menggambarkan hubungan antara cty dan hwy? Apakah Anda memiliki              kekhawatiran tentang menarik kesimpulan dari plot tersebut?

2.Apa yang ditampilkan oleh `ggplot(mpg, aes(model, manufacturer)) + geom_point()`? Apakah    itu berguna? Bagaimana Anda bisa memodifikasi data agar lebih informatif?

3.Jelaskan data, pemetaan estetika, dan lapisan yang digunakan untuk masing-masing plot       berikut. Anda perlu menebak sedikit karena Anda belum melihat semua dataset dan fungsi,     tetapi gunakan akal sehat Anda! Lihat apakah Anda bisa memprediksi bagaimana tampilan plot   sebelum menjalankan kodenya:

1.`ggplot(mpg, aes(cty, hwy)) + geom_point()`

2.`ggplot(diamonds, aes(carat, price)) + geom_point()`

3.`ggplot(economics, aes(date, unemploy)) + geom_line()`

4.`ggplot(mpg, aes(cty)) + geom_histogram()`

## 1.4 Warna, ukuran, bentuk, dan atribut estetika lainnya

Untuk memasukkan variabel tambahan ke dalam plot, kita dapat memanfaatkan estetika lain seperti warna, bentuk, dan ukuran. (Catatan: meskipun dalam buku ini digunakan ejaan British, ggplot2 juga mendukung ejaan American). Estetika tersebut berfungsi dengan cara yang sama seperti `x` dan `y`, dan ditambahkan di dalam pemanggilan fungsi `aes()` sebagai berikut:
  
- `aes(displ, hwy, colour = class)`
- `aes(displ, hwy, shape = drv)`
- `aes(displ, hwy, size = cyl)`

ggplot2 secara otomatis mengelola proses mengonversi nilai data (misalnya ‘f’, ‘r’, ‘4’) menjadi representasi estetika (seperti ‘merah’, ‘kuning’, atau ‘hijau’) melalui sebuah **skala**. Setiap pemetaan estetika dalam plot memiliki skala tersendiri. Skala ini juga berperan dalam menghasilkan panduan visual seperti sumbu dan legenda, yang membantu pembaca memahami grafik dengan menghubungkan kembali nilai estetika ke nilai data yang sebenarnya. Untuk saat ini, kita akan menggunakan skala bawaan yang telah disediakan oleh ggplot2.

Untuk mempelajari lebih lanjut tentang variabel luar tersebut dalam scatterplot sebelumnya, kita dapat memetakan variabel kelas ke warna:

```{r}
ggplot(mpg, aes(displ, hwy, colour = class)) + 
  geom_point()
```


Pemetaan ini memberikan warna yang berbeda untuk setiap titik berdasarkan kelas kendaraan yang diwakilinya. Legenda yang ditampilkan membantu kita menginterpretasikan data melalui warna tersebut, dan menunjukkan bahwa kelompok mobil dengan efisiensi bahan bakar sangat tinggi dibanding ukuran mesinnya adalah mobil berjenis dua tempat duduk: kendaraan dengan kapasitas mesin besar namun memiliki bodi yang ringan.

Jika Anda ingin menetapkan suatu estetika ke nilai tetap, tanpa mengubah skalanya, lakukan itu di lapisan individual di luar `aes()`. Bandingkan dua plot berikut:

```{r}
ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour = "blue"))
ggplot(mpg, aes(displ, hwy)) + geom_point(colour = "blue")
```

Pada grafik pertama, nilai “biru” diterjemahkan oleh skala menjadi warna yang sedikit merah muda, dan sebuah legenda ditampilkan secara otomatis. Sementara pada grafik kedua, titik-titik secara eksplisit diberi warna biru menggunakan sistem pewarnaan R. Untuk mengetahui nilai yang dapat digunakan pada estetika colour dan estetika lainnya, Anda dapat melihat dokumentasi melalui perintah `vignette("ggplot2-specs")`.

Setiap jenis atribut estetika memiliki kesesuaian yang berbeda dengan tipe variabel tertentu. Sebagai contoh, warna dan bentuk lebih efektif digunakan untuk variabel kategori, sedangkan ukuran lebih sesuai untuk variabel kontinu. Selain itu, jumlah data juga berpengaruh—dataset yang terlalu besar bisa menyulitkan dalam membedakan setiap kelompok. Salah satu solusi yang dapat digunakan untuk mengatasi hal tersebut adalah teknik faceting, yang akan dijelaskan pada bagian berikutnya.

Dalam penggunaan estetika pada grafik, prinsip “lebih sedikit lebih baik” sering kali berlaku. Terlalu banyak estetika seperti warna, bentuk, dan ukuran yang digunakan secara bersamaan dapat menyulitkan pembaca dalam memahami hubungan antar variabel. Oleh karena itu, gunakan estetika secara bijak. Alih-alih membuat satu grafik yang sangat kompleks untuk menampilkan semua informasi sekaligus, akan lebih efektif jika Anda membuat beberapa grafik sederhana yang disusun untuk menceritakan suatu alur pemahaman, mengarahkan pembaca dari tidak mengetahui menjadi memahami.

### 1.4.1 Latihan

1.Bermain-mainlah dengan estetika warna, bentuk, dan ukuran. Apa yang terjadi ketika Anda memetakannya ke nilai kontinu? Bagaimana dengan nilai kategorikal? Apa yang terjadi ketika Anda menggunakan lebih dari satu estetika dalam sebuah grafik?

2.Apa yang terjadi jika Anda memetakan variabel kontinu ke bentuk? Mengapa? Apa yang terjadi jika Anda memetakan trans ke bentuk? Mengapa?

3.Bagaimana hubungannya sistem penggerak dengan efisiensi bahan bakar? Bagaimana hubungannya sistem penggerak dengan ukuran dan kelas mesin?

## 1.5 Pembuatan Faset

Salah satu teknik lain yang dapat digunakan untuk menampilkan variabel kategorikal tambahan dalam sebuah plot adalah faceting. Teknik ini menyusun serangkaian grafik dalam bentuk tabel dengan cara membagi data menjadi beberapa subset, kemudian menampilkan plot yang sama untuk setiap subset sehingga pola dan perbedaan antar kelompok dapat diamati dengan lebih jelas.

Terdapat dua tipe faceting, yaitu grid dan wrapped. Di antara keduanya, faceting tipe wrapped merupakan yang paling sering digunakan, sehingga pembahasan akan difokuskan pada jenis ini terlebih dahulu. Untuk menerapkan faceting pada grafik, Anda dapat menambahkan fungsi `facet_wrap()`, yang menerima nama variabel dengan diawali tanda `~`.


```{r}
ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  facet_wrap(~class)
```

### 1.5.1 Latihan

1.  Apa yang terjadi jika Anda mencoba melakukan facet dengan variabel kontinu seperti `hwy`? Bagaimana dengan `cyl`? Apa perbedaan utamanya?
2.  Gunakan faceting untuk mengeksplorasi hubungan tiga arah antara efisiensi bahan bakar, ukuran mesin, dan jumlah silinder. Bagaimana faceting berdasarkan jumlah silinder mengubah penilaian Anda terhadap hubungan antara ukuran mesin dan efisiensi bahan bakar?
3.  Baca dokumentasi untuk `facet_wrap()`. Argumen apa yang dapat Anda gunakan untuk mengontrol jumlah baris dan kolom yang muncul dalam output?
4.  Apa gunanya `scales` argumen tersebut `facet_wrap()`? Kapan Anda bisa menggunakannya?

## 1.6 Plot Geom

Anda mungkin menduga bahwa dengan mengganti `geom_point()` fungsi geom yang berbeda, Anda akan mendapatkan jenis plot yang berbeda. Tebakan yang bagus! Di bagian selanjutnya, Anda akan mempelajari beberapa geom penting lainnya yang disediakan di ggplot2. Daftar ini tidak lengkap, tetapi seharusnya mencakup jenis plot yang paling umum digunakan.

-   `geom_smooth()` menyesuaikan penghalus dengan data dan menampilkan penghalus dan kesalahan standarnya.
-   `geom_boxplot()` menghasilkan diagram kotak dan kumis untuk meringkas distribusi sekumpulan titik.
-   `geom_histogram()` dan `geom_freqpoly()` menunjukkan distribusi variabel kontinu.
-   `geom_bar(`)menunjukkan distribusi variabel kategoris.
-   `geom_path()` dan `geom_line()` menggambar garis di antara titik-titik data. Plot garis dibatasi untuk menghasilkan garis yang bergerak dari kiri ke kanan, sementara jalur dapat bergerak ke segala arah. Garis biasanya digunakan untuk mengeksplorasi bagaimana sesuatu berubah seiring waktu.

### 1.6.1 Menambahkan Penghalus ke Plot

Jika Anda memiliki diagram sebar dengan banyak noise, pola dominannya mungkin sulit terlihat. Dalam hal ini, menambahkan garis halus ke diagram dengan `geom_smooth()`:

```{r}
ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  geom_smooth()
#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'
```

Fungsi ini menambahkan lapisan grafik berupa kurva halus di atas diagram sebar, beserta estimasi tingkat ketidakpastian yang ditampilkan melalui interval kepercayaan pada setiap titik menggunakan warna abu-abu. Jika Anda tidak ingin menampilkan interval keyakinan tersebut, Anda dapat menonaktifkannya dengan menggunakan `geom_smooth(se = FALSE)`.

Argumen penting untuk `geom_smooth()` adalah `method`, yang memungkinkan Anda memilih jenis model mana yang digunakan untuk menyesuaikan kurva halus:

-   `method = "loess"`, nilai default untuk n kecil, menggunakan regresi lokal yang halus (seperti yang dijelaskan dalam `?loess`). Kemiringan garis dikontrol oleh `span` parameter, yang berkisar dari 0 (sangat bergelombang) hingga 1 (tidak terlalu bergelombang).

```{r}
ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  geom_smooth(span = 0.2)
#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'

ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  geom_smooth(span = 1)
#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'
```

Loess tidak bekerja dengan baik untuk kumpulan data besar (itu O(n2) dalam memori), jadi algoritma penghalusan alternatif digunakan saat n lebih besar dari 1.000.

-   `method = "gam"` Sesuai dengan model aditif umum yang disediakan oleh paket **mgcv** . Anda perlu memuat mgcv terlebih dahulu, lalu menggunakan rumus seperti `formula = y ~ s(x)` atau `y ~ s(x, bs = "cs")` (untuk data besar). Inilah yang digunakan ggplot2 ketika terdapat lebih dari 1.000 titik.

```{r}
library(mgcv)
ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  geom_smooth(method = "gam", formula = y ~ s(x))
```

-   `method = "lm"` sesuai dengan model linier, memberikan garis yang paling sesuai.

```{r}
ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  geom_smooth(method = "lm")
#> `geom_smooth()` using formula = 'y ~ x'
```

-   Argumen `method = "rlm"` bekerja serupa dengan `lm()`, tetapi menggunakan algoritma pemodelan robust yang dirancang untuk meminimalkan pengaruh pencilan (outlier) terhadap hasil pemodelan. Fungsi ini berasal dari paket **MASS**, sehingga Anda perlu memastikan paket tersebut telah dimuat sebelum menggunakannya.

### 1.6.2 Boxplot dan Titik-Titik Yang Bergetar

Ketika sekumpulan data mencakup satu variabel kategoris dan satu atau lebih variabel kontinu, Anda mungkin tertarik untuk mengetahui bagaimana nilai variabel kontinu tersebut bervariasi seiring dengan level variabel kategoris. Katakanlah kita ingin melihat bagaimana efisiensi bahan bakar bervariasi pada mobil dengan jenis drivetrain yang sama. Kita bisa mulai dengan diagram sebar seperti ini:

```{r}
ggplot(mpg, aes(drv, hwy)) + 
  geom_point()
```

Karena hanya ada sedikit nilai unik untuk keduanya `drv` dan `hwy`, terjadi banyak overplotting. Banyak titik diplot di lokasi yang sama, sehingga distribusinya sulit dilihat. Ada tiga teknik bermanfaat yang dapat membantu mengatasi masalah ini: - Jittering, `geom_jitter()` menambahkan sedikit noise acak ke data yang dapat membantu menghindari overplotting. - Boxplot `geom_boxplot()`, meringkas bentuk distribusi dengan beberapa statistik ringkasan. - Plot biola, `geom_violin()`, menunjukkan representasi kompak dari “kepadatan” distribusi, yang menyorot area di mana lebih banyak titik ditemukan.

Berikut ini diilustrasikan:

```{r}
ggplot(mpg, aes(drv, hwy)) + geom_jitter()
ggplot(mpg, aes(drv, hwy)) + geom_boxplot()
ggplot(mpg, aes(drv, hwy)) + geom_violin()
```

Setiap metode visualisasi memiliki keunggulan dan keterbatasannya masing-masing. Boxplot mampu merangkum sebagian besar distribusi data hanya dengan lima nilai statistik utama. Jittered plot menampilkan seluruh titik data secara individual, namun hanya efektif digunakan untuk dataset yang jumlahnya tidak terlalu besar. Sementara itu, violin plot menawarkan visualisasi yang lebih informatif dan mendetail, tetapi mengandalkan estimasi kepadatan data yang mungkin memerlukan interpretasi lebih mendalam.

Untuk titik-titik yang bergetar, `geom_jitter()` menawarkan kontrol estetika yang sama seperti `geom_point()`: `size`, `colour`, dan `shape`. Untuk `geom_boxplot()`dan `geom_violin()`, Anda dapat mengontrol garis luar `colour` atau warna internal `fill`.

### 1.6.3 Histogram dan Poligon Frekuensi

Histogram dan poligon frekuensi digunakan untuk menggambarkan distribusi dari satu variabel numerik. Kedua jenis grafik ini mampu menampilkan informasi yang lebih mendalam tentang distribusi suatu kelompok data dibandingkan boxplot, meskipun membutuhkan ruang visual yang lebih besar untuk ditampilkan secara efektif.

```{r}
ggplot(mpg, aes(hwy)) + geom_histogram()
#> `stat_bin()` using `bins = 30`. Pick better value `binwidth`.
ggplot(mpg, aes(hwy)) + geom_freqpoly()
#> `stat_bin()` using `bins = 30`. Pick better value `binwidth`.
```

Histogram dan poligon frekuensi memiliki cara kerja yang serupa, yaitu dengan membagi data ke dalam beberapa kelompok (bins), kemudian menghitung jumlah observasi dalam setiap kelompok tersebut. Perbedaan keduanya terletak pada bentuk visualnya: histogram ditampilkan menggunakan batang, sementara poligon frekuensi digambarkan menggunakan garis yang menghubungkan titik frekuensi.

Anda dapat mengatur lebar bin menggunakan argumen `binwidth`. Jika Anda memerlukan jarak antar bin yang tidak seragam, Anda bisa menggunakan argumen `breaks`. Sangat penting untuk mencoba berbagai ukuran bin, karena pengaturan default yang membagi data menjadi 30 bin mungkin bukan representasi terbaik. Mencoba beberapa variasi lebar bin akan membantu Anda memperoleh pemahaman yang lebih menyeluruh mengenai struktur distribusi data.

```{r}
ggplot(mpg, aes(hwy)) + 
  geom_freqpoly(binwidth = 2.5)
ggplot(mpg, aes(hwy)) + 
  geom_freqpoly(binwidth = 1)
```

Alternatif lain dari poligon frekuensi adalah density plot, yang dapat dibuat menggunakan `geom_density()`. Namun, penggunaan plot kepadatan perlu dilakukan dengan hati-hati karena interpretasinya lebih kompleks dibandingkan poligon frekuensi. Hal ini disebabkan oleh perhitungan estimasi kepadatan yang mendasarinya, serta asumsi yang digunakan, seperti distribusi data yang bersifat kontinu, tidak terbatas, dan halus—yang tidak selalu sesuai untuk semua jenis data.

Untuk membandingkan distribusi dari beberapa subkelompok, Anda dapat memetakan variabel kategoris ke dalam isian (fill) pada `geom_histogram()` atau menggunakan warna pada `geom_freqpoly()`. Poligon frekuensi sering kali lebih mudah dibandingkan histogram dalam hal persepsi visual saat membandingkan distribusi. Selain itu, Anda juga dapat menggunakan teknik faceting; meskipun membandingkan antar kelompok menjadi sedikit lebih menantang, teknik ini mempermudah pengamatan distribusi masing-masing grup secara individu.

```{r}
ggplot(mpg, aes(displ, colour = drv)) + 
  geom_freqpoly(binwidth = 0.5)
ggplot(mpg, aes(displ, fill = drv)) + 
  geom_histogram(binwidth = 0.5) + 
  facet_wrap(~drv, ncol = 1)
```



### 1.6.4 Grafik Batang

Analog diskrit dari histogram adalah diagram batang. geom_bar()Mudah digunakan:

```{r}
ggplot(mpg, aes(manufacturer)) + 
  geom_bar()
```

Diagram batang dapat menimbulkan kebingungan karena istilah ini digunakan untuk merujuk pada dua jenis plot yang berbeda, meskipun keduanya sama-sama disebut diagram batang. Jenis pertama mengharuskan data dalam bentuk mentah atau belum diringkas, di mana setiap observasi individu menyumbang satu unit pada tinggi batang. Jenis kedua digunakan untuk data yang sudah diringkas terlebih dahulu sebelum divisualisasikan. Misalnya, Anda mungkin memiliki tiga obat dengan efek rata-ratanya:

```{r}
drugs <- data.frame(
  drug = c("a", "b", "c"),
  effect = c(4.2, 9.7, 6.1)
)
```

Untuk menampilkan data semacam ini, Anda perlu mengatur `geom_bar()`agar tidak menjalankan stat default yang mengelompokkan dan menghitung data. Namun, menurut kami, penggunaan stat ini lebih baik `geom_point()` karena titik membutuhkan ruang lebih sedikit daripada batang, dan tidak mengharuskan sumbu y memuat angka 0.

```{r}
ggplot(drugs, aes(drug, effect)) + geom_bar(stat = "identity")
ggplot(drugs, aes(drug, effect)) + geom_point()
```

### 1.6.5 Deret Waktu Dengan PLot Garis dan Jalur

Plot garis dan plot jalur umumnya digunakan untuk menganalisis data deret waktu. Plot garis menghubungkan titik data dari kiri ke kanan berdasarkan urutan nilai pada sumbu x, sedangkan plot jalur menghubungkan titik sesuai dengan urutan kemunculannya di dalam dataset. Dengan kata lain, plot garis dapat dianggap sebagai plot jalur yang datanya telah diurutkan berdasarkan nilai x.

Pada plot garis, sumbu x biasanya merepresentasikan waktu untuk menunjukkan bagaimana satu variabel berubah dari waktu ke waktu. Sebaliknya, plot jalur menggambarkan perubahan dua variabel secara simultan seiring waktu, dengan urutan waktu direpresentasikan melalui urutan koneksi antar titik.

Karena variabel tahun pada dataset`mpg` hanya memiliki dua nilai, kita akan menggunakan dataset `economics` untuk menampilkan beberapa contoh plot deret waktu. Dataset tersebut berisi data ekonomi Amerika Serikat yang dikumpulkan selama 40 tahun terakhir. Gambar berikut menyajikan dua plot tingkat pengangguran dari waktu ke waktu, keduanya dibuat menggunakan `geom_line()`. Plot pertama menggambarkan persentase tingkat pengangguran, sedangkan plot kedua menunjukkan median durasi pengangguran dalam minggu.

Dari kedua plot tersebut, kita dapat mengamati beberapa perbedaan penting, terutama pada puncak terakhir. Meskipun tingkat pengangguran lebih rendah dibandingkan puncak sebelumnya, durasi pengangguran justru lebih panjang, menunjukkan pergeseran dinamika dalam pasar tenaga kerja.

```{r}
ggplot(economics, aes(date, unemploy / pop)) +
  geom_line()
ggplot(economics, aes(date, uempmed)) +
  geom_line()
```

Untuk menganalisis hubungan kedua variabel secara lebih mendalam, kita perlu menampilkan kedua deret waktu dalam satu plot. Salah satu opsi adalah membuat diagram sebar antara tingkat pengangguran dan durasi pengangguran; namun, cara ini menghilangkan informasi tentang urutan waktu. Oleh karena itu, solusi yang tepat adalah menghubungkan titik-titik yang berurutan berdasarkan waktu menggunakan segmen garis, membentuk apa yang disebut plot *jalur*.

Pada contoh berikut, kita memvisualisasikan tingkat pengangguran terhadap lama pengangguran dan menghubungkan setiap titik data dengan jalur berdasarkan urutan waktu. Pada plot pertama, banyaknya garis yang berpotongan menyebabkan arah waktu sulit dipahami. Oleh karena itu, pada plot kedua, titik-titik diberi warna untuk mempermudah pembaca mengikuti alur waktu secara visual.

```{r}
ggplot(economics, aes(unemploy / pop, uempmed)) + 
  geom_path() +
  geom_point()

year <- function(x) as.POSIXlt(x)$year + 1900
ggplot(economics, aes(unemploy / pop, uempmed)) + 
  geom_path(colour = "grey50") +
  geom_point(aes(colour = year(date)))
```

Dari visualisasi tersebut, terlihat bahwa terdapat korelasi yang kuat antara tingkat pengangguran dan durasi pengangguran. Namun, dalam beberapa tahun terakhir, durasi pengangguran cenderung meningkat lebih signifikan dibandingkan tingkat pengangguran itu sendiri, menunjukkan adanya perubahan pola dalam dinamika ketenagakerjaan.

Dalam analisis data longitudinal, sering kali Anda ingin menampilkan beberapa deret waktu dalam satu plot, di mana masing-masing deret merepresentasikan individu atau kelompok tertentu. Untuk mencapai hal tersebut, Anda perlu memetakan estetika `group` ke variabel yang mengidentifikasi keanggotaan setiap observasi dalam kelompoknya.

### 1.6.6 Latihan

1.  Apa masalah dengan plot yang dibuat oleh `ggplot(mpg, aes(cty, hwy)) + geom_point()`? Geom mana yang dijelaskan di atas yang paling efektif dalam mengatasi masalah tersebut?
2.  Salah satu tantangannya `ggplot(mpg, aes(class, hwy)) + geom_boxplot()`adalah pengurutan `class` berdasarkan abjad, yang kurang bermanfaat. Bagaimana Anda bisa mengubah tingkat faktor agar lebih informatif?

Daripada menyusun ulang faktor secara manual, Anda dapat melakukannya secara otomatis berdasarkan data: `ggplot(mpg, aes(reorder(class, hwy), hwy)) + geom_boxplot()`. Apa fungsinya `reorder()`? Baca dokumentasinya. 3. Jelajahi distribusi variabel karat dalam `diamonds` kumpulan data. Lebar bin berapa yang menunjukkan pola paling menarik? 4. Jelajahi distribusi variabel harga dalam `diamonds` data. Bagaimana distribusinya bervariasi berdasarkan potongan? 5. Anda sekarang mengetahui (setidaknya) tiga cara untuk membandingkan distribusi subgrup: `geom_violin()`, `geom_freqpoly()` dan estetika warna, atau `geom_histogram()` dan faceting. Apa saja kekuatan dan kelemahan masing-masing pendekatan? Pendekatan lain apa yang bisa Anda coba? 6. Baca dokumentasi untuk `geom_bar()`. Apa `weight` fungsi estetika? 7. Dengan menggunakan teknik yang telah dibahas dalam bab ini, temukan tiga cara untuk memvisualisasikan distribusi kategoris 2D. Cobalah dengan memvisualisasikan distribusi `model` dan `manufacturer`, `trans` dan `class`, dan `cyl` dan `trans`.

## 1.7 Memodifikasi Sumbu

Anda akan mempelajari seluruh rangkaian opsi yang tersedia di bab-bab selanjutnya, tetapi dua keluarga pembantu yang berguna memungkinkan Anda membuat modifikasi yang paling umum `xlab()` dan `ylab()` memodifikasi label sumbu x dan y:

```{r}
ggplot(mpg, aes(cty, hwy)) +
  geom_point(alpha = 1 / 3)

ggplot(mpg, aes(cty, hwy)) +
  geom_point(alpha = 1 / 3) + 
  xlab("city driving (mpg)") + 
  ylab("highway driving (mpg)")

# Remove the axis labels with NULL
ggplot(mpg, aes(cty, hwy)) +
  geom_point(alpha = 1 / 3) + 
  xlab(NULL) + 
  ylab(NULL)
```

`xlim()` dan `ylim()` memodifikasi batas sumbu:

```{r}
ggplot(mpg, aes(drv, hwy)) +
  geom_jitter(width = 0.25)

ggplot(mpg, aes(drv, hwy)) +
  geom_jitter(width = 0.25) + 
  xlim("f", "r") + 
  ylim(20, 30)
#> Warning: Removed 138 rows containing missing values or values outside the scale range
#> (`geom_point()`).
  
# For continuous scales, use NA to set only one limit
ggplot(mpg, aes(drv, hwy)) +
  geom_jitter(width = 0.25, na.rm = TRUE) + 
  ylim(NA, 30)
```

Jika kamu mengatur batas sumbu (misalnya `ylim` atau `xlim`) dalam plot, maka data yang berada di luar batas tersebut akan otomatis diubah menjadi `NA` (artinya dianggap tidak ada atau hilang).

Untuk menghilangkan peringatan ini, kamu bisa menggunakan argumen `na.rm = TRUE` agar nilai `NA` dihapus secara diam-diam saat proses plotting.

## 1.8 Keluaran

Sering kali Anda membuat objek plot dan langsung memplotnya, tetapi Anda juga dapat menyimpan plot ke variabel dan memanipulasinya:

```{r}
p <- ggplot(mpg, aes(displ, hwy, colour = factor(cyl))) +
  geom_point()
```

Setelah Anda memiliki objek plot, ada beberapa hal yang dapat Anda lakukan dengannya:

Render di layar dengan `print()`. Ini terjadi secara otomatis saat dijalankan secara interaktif, tetapi di dalam loop atau fungsi, Anda perlu melakukannya `print()` sendiri.

```{r}
print(p)
```

-   Simpan ke disk dengan `ggsave()`

```{r}
# Save png to disk
ggsave("plot.png", p, width = 5, height = 5)
```

-   Jelaskan secara singkat strukturnya dengan `summary()`

```{r}
summary(p)
#> data: manufacturer, model, displ, year, cyl, trans, drv, cty, hwy, fl,
#>   class [234x11]
#> mapping:  x = ~displ, y = ~hwy, colour = ~factor(cyl)
#> faceting:  <empty> 
#> -----------------------------------
#> geom_point: na.rm = FALSE
#> stat_identity: na.rm = FALSE
#> position_identity
```

DONE.


